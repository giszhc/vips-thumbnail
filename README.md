# vips-thumbnail

一个基于 **libvips** 的命令行工具，用于**批量压缩图片**，也可以按需生成缩略图。

特点是：**快、简单、对新手友好**。

---

## ✨ 功能特点

- 🖼 批量压缩 JPG / PNG 图片
- 📉 只压缩不改尺寸（默认行为）
- 📐 可选生成缩略图（指定尺寸）
- 📁 支持递归处理子目录
- ⚡ 基于 libvips，性能优秀
- 🍺 支持 Homebrew 一行安装

---

## 📦 安装方式（macOS）

> 需要已安装 Homebrew

### 1️⃣ 添加 tap

```bash
brew tap giszhc/vips-thumbnail
```

### 2️⃣ 安装工具

```
brew install thumbnail
```

安装完成后，会得到一个命令：`thumbnail`

------

## 🚀 使用方法

```
thumbnail <源目录> <输出目录> [参数]
```

------

## ⭐ 最常用（推荐）

### 👉 只压缩图片，不改变尺寸

```
thumbnail ./images ./out --quality 80
```

含义：

- 图片尺寸保持不变
- 压缩质量为 80
- 文件体积明显减小

这是**最推荐的新手用法**。

------

## 📐 生成缩略图（可选）

```
thumbnail ./images ./out --size 400 --quality 80
```

含义：

- 图片最长边缩放到 400
- 同时按质量 80 压缩

------

## 🧩 参数说明

| 参数                | 说明                                 |
| ------------------- | ------------------------------------ |
| `--quality <1-100>` | 压缩质量，默认 85（越小体积越小）    |
| `--size <数字>`     | 生成缩略图的尺寸（不传则保持原尺寸） |
| `--ext <.jpg/.png>` | 指定输出格式（可选）                 |
| `--recursive`       | 递归处理子目录                       |
| `-h, --help`        | 查看帮助                             |

------

## 📂 示例：递归压缩整个目录

```
thumbnail ./photos ./compressed --quality 75 --recursive
```

------

## 🔧 依赖说明

- `libvips`
   会由 Homebrew **自动安装**，无需手动处理。

------

## ❓ 常见问题

### Q：不传 `--size` 会发生什么？

A：图片尺寸保持不变，只进行压缩。

### Q：质量一般设多少？

A：

- 80～85：推荐，肉眼几乎无差别
- 60～70：体积更小，适合网页

### Q：支持 Windows 吗？

A：当前仅支持 macOS（Homebrew）。

------

## 📄 License

MIT
